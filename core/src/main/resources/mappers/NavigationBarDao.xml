<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.go2plus.core.backgroundManage.dao.NavigationBarDao">
  <insert id="saveNavigationBar" parameterType="NavigationBar" useGeneratedKeys="true" keyProperty="id">
    insert into navigation_bar(
    area,
    navigation_subdomain,
    navigation_name,
    navigation_weights,
    content,
    state,
    create_time,
    update_time
    )
    values(
    #{area},
    #{navigationSubdomain},
    #{navigationName},
    #{navigationWeights},
    #{content},
    #{state},
    now(),
    now()
    )
  </insert>
  <select id="selectNavigationBar" parameterType="NavigationBar" resultType="NavigationBar">
    select
    id,
    area,
    navigation_subdomain,
    navigation_name,
    navigation_weights,
    content,
    state,
    create_time,
    update_time
    from navigation_bar
    where
    state=1
    <if test="area >0 ">
      and area=#{area}
    </if>
    <if test="navigationName >0 ">
      and navigation_name=#{navigationName}
    </if>
  </select>

  <update id="updateNavigationBar" parameterType="NavigationBar">
    update navigation_bar
    set
    area=#{area},
    navigation_subdomain=#{navigationSubdomain},
    navigation_name=#{navigationName},
    navigation_weights=#{navigationWeights},
    update_time=now()
    where id=#{id}
  </update>

  <delete id="deleteNavigationBar" parameterType="int">
    update navigation_bar
    set state=-1,
    update_time=now()
    where id=#{id}
  </delete>

  <select id="queryNavigationBarName" parameterType="String" resultType="NavigationBar">
    select
    navigation_subdomain,
    navigation_name
    from navigation_bar
    where area=#{area}
    order by navigation_weights desc
  </select>

  <insert id="saveConsoleAd" useGeneratedKeys="true" keyProperty="id" parameterType="ConsoleAd">
    INSERT INTO console_ad_time (
    start_time,
    end_time,
    type
    )VALUES(
    #{startTime},
    #{endTime},
    #{type}
    );
  </insert>
</mapper>
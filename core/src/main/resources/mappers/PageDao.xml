<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.go2plus.core.page.dao.PageDao">
  <sql id="pageFields">
    page.id,
    page.user_id,
    page.title,
    page.content,
    page.state,
    page.create_time,
    page.update_time
  </sql>
  
  <resultMap type="Page" id="pageResult">
  </resultMap>
  
  <select id="findPageByUserIdAndFwcn" parameterType="Integer" resultType="Page">
    select 
    <include refid="pageFields" />
    from page
    where
    page.user_id=#{userId}
    and
    title="服务承诺"
  </select>
  
  <update id="updatePageByUserIdAndFwcn" parameterType="Page">
    update page
    set
    content=#{content}
    where
    user_id=#{userId}
  </update> 
  
  <insert id="insertPage" parameterType="Page">
    insert into page(
    user_id,
    title,
    content,
    state,
    create_time,
    update_time
    )
    values(
    #{userId},
    #{title},
    #{content},
    #{state},
    #{createTime},
    #{updateTime}
    )
  </insert>
</mapper>